<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Discover the best SaaS tools for your business needs. Find top software solutions categorized for easy Browse and review.">
    <meta name="keywords" content="SaaS, tools, software, directory, business, solutions, find tools, reviews">
    <title>SaaS Tools Directory - Find the Best Software for Your Business</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
</head>
<body class="bg-gray-100 text-gray-900 dark:bg-gray-900 dark:text-gray-100 font-sans leading-normal tracking-normal">

    <div id="cookieBanner" class="fixed bottom-0 left-0 right-0 bg-gray-800 text-white p-4 text-center z-50 hidden">
        <p class="text-sm">We use cookies to ensure you get the best experience on our website. By continuing to use our site, you agree to our <a href="/privacy.html" class="underline">Privacy Policy</a>.</p>
        <button id="acceptCookies" class="mt-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white text-sm">Accept Cookies</button>
    </div>

    <header class="bg-white dark:bg-gray-800 shadow-md">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="/" class="text-2xl font-bold text-gray-800 dark:text-white">SaaS Directory</a>
            <nav class="flex items-center space-x-6">
                <a href="/" class="text-gray-700 hover:text-blue-600 dark:text-gray-300 dark:hover:text-blue-400">Home</a>
                <a href="/blog.html" class="text-gray-700 hover:text-blue-600 dark:text-gray-300 dark:hover:text-blue-400">Blog</a>
                <a href="/submit-tool.html" class="text-gray-700 hover:text-blue-600 dark:text-gray-300 dark:hover:text-blue-400">Submit Tool</a>
                <a href="/faq.html" class="text-gray-700 hover:text-blue-600 dark:text-gray-300 dark:hover:text-blue-400">FAQ</a>
                <a href="/admin.html" id="adminLink" class="text-gray-700 hover:text-blue-600 dark:text-gray-300 dark:hover:text-blue-400" style="display:none;">Admin</a>
                
                <label for="darkModeToggle" class="flex items-center cursor-pointer">
                    <div class="relative">
                        <input type="checkbox" id="darkModeToggle" class="sr-only">
                        <div class="block bg-gray-600 w-10 h-6 rounded-full"></div>
                        <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition"></div>
                    </div>
                    <div class="ml-3 text-gray-700 font-medium dark:text-gray-300">Dark Mode</div>
                </label>
            </nav>
        </div>
    </header>

    <section class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-20 text-center shadow-lg">
        <div class="container mx-auto px-6">
            <h1 class="text-4xl md:text-6xl font-extrabold leading-tight mb-4">Find the Perfect SaaS Tool for Your Business</h1>
            <p class="text-lg md:text-xl mb-8">Explore our curated directory of top-rated software solutions.</p>
            <div class="max-w-xl mx-auto">
                <input type="text" id="searchInput" placeholder="Search for tools or categories..." class="w-full p-4 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-blue-400 text-gray-900">
            </div>
        </div>
    </section>

    <section class="container mx-auto px-6 py-12">
        <h2 class="text-3xl font-bold text-gray-800 dark:text-white mb-8 text-center">Browse by Category</h2>
        <div id="categoriesContainer" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 text-center animate-pulse">
                <div class="w-12 h-12 bg-gray-300 dark:bg-gray-700 mx-auto rounded-full mb-4"></div>
                <div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-3/4 mx-auto"></div>
            </div>
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 text-center animate-pulse">
                <div class="w-12 h-12 bg-gray-300 dark:bg-gray-700 mx-auto rounded-full mb-4"></div>
                <div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-3/4 mx-auto"></div>
            </div>
             </div>
        <div id="categoriesError" class="hidden text-center text-red-500 mt-8">
            <p><i class="fas fa-exclamation-circle mr-2"></i> Failed to load categories. Please try again later.</p>
        </div>
        <div id="noCategoriesFound" class="hidden text-center text-gray-600 dark:text-gray-400 mt-8">
            <p>No categories found.</p>
        </div>
    </section>

    <section class="bg-gray-50 dark:bg-gray-800 py-12">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-bold text-gray-800 dark:text-white mb-8 text-center">Featured SaaS Tools</h2>
            <div id="toolsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-white dark:bg-gray-700 rounded-lg shadow-md p-6 animate-pulse">
                    <div class="w-16 h-16 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-4"></div>
                    <div class="h-6 bg-gray-300 dark:bg-gray-600 rounded w-3/4 mx-auto mb-2"></div>
                    <div class="h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mx-auto mb-4"></div>
                    <div class="h-16 bg-gray-300 dark:bg-gray-600 rounded mb-4"></div>
                    <div class="h-10 bg-blue-400 rounded w-full"></div>
                </div>
                 <div class="bg-white dark:bg-gray-700 rounded-lg shadow-md p-6 animate-pulse">
                    <div class="w-16 h-16 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-4"></div>
                    <div class="h-6 bg-gray-300 dark:bg-gray-600 rounded w-3/4 mx-auto mb-2"></div>
                    <div class="h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mx-auto mb-4"></div>
                    <div class="h-16 bg-gray-300 dark:bg-gray-600 rounded mb-4"></div>
                    <div class="h-10 bg-blue-400 rounded w-full"></div>
                </div>
            </div>
             <div id="toolsError" class="hidden text-center text-red-500 mt-8">
                <p><i class="fas fa-exclamation-circle mr-2"></i> Failed to load tools. Please try again later.</p>
            </div>
            <div id="noToolsFound" class="hidden text-center text-gray-600 dark:text-gray-400 mt-8">
                <p>No tools found matching your criteria.</p>
            </div>
        </div>
    </section>
    
    <footer class="bg-gray-800 dark:bg-gray-900 text-white py-8 mt-12">
        <div class="container mx-auto px-6 text-center">
            <div class="flex flex-wrap justify-center gap-8 mb-6">
                <a href="/about.html" class="hover:text-blue-400">About Us</a>
                <a href="/privacy.html" class="hover:text-blue-400">Privacy Policy</a>
                <a href="/terms.html" class="hover:text-blue-400">Terms of Service</a>
                <a href="/contact.html" class="hover:text-blue-400">Contact</a>
                <a href="https://github.com/your-username/your-repo-name" target="_blank" class="hover:text-blue-400"><i class="fab fa-github"></i> GitHub</a>
            </div>
            <p>&copy; 2024 SaaS Tools Directory. All rights reserved.</p>
        </div>
    </footer>

    <script src="js/firebase-config.js"></script>
    <script src="js/firestore.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/script.js"></script>
    <script src="js/seo-meta.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            // Set initial SEO metadata for the homepage
            setSeoMetaData(
                'home',
                "SaaS Tools Directory - Find the Best Software for Your Business",
                "Discover the best SaaS tools for your business needs. Find top software solutions categorized for easy Browse and review.",
                "SaaS, tools, software, directory, business, solutions, find tools, reviews"
            );

            const categoriesContainer = document.getElementById('categoriesContainer');
            const categoriesError = document.getElementById('categoriesError');
            const noCategoriesFound = document.getElementById('noCategoriesFound');
            const toolsContainer = document.getElementById('toolsContainer');
            const toolsError = document.getElementById('toolsError');
            const noToolsFound = document.getElementById('noToolsFound');
            const searchInput = document.getElementById('searchInput');

            // --- Load Categories ---
            async function loadCategories() {
                try {
                    const categories = await getAllDocuments('categories');
                    categoriesContainer.innerHTML = ''; // Clear placeholders

                    if (categories.length === 0) {
                        noCategoriesFound.classList.remove('hidden');
                        return;
                    }

                    noCategoriesFound.classList.add('hidden');
                    categories.forEach(category => {
                        const categoryCard = `
                            <a href="#" class="category-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 text-center hover:shadow-lg transition duration-300 transform hover:-translate-y-1">
                                <div class="text-4xl text-blue-600 dark:text-blue-400 mb-4">
                                    <i class="${category.iconClass || 'fas fa-cogs'}"></i>
                                </div>
                                <h3 class="text-xl font-semibold text-gray-800 dark:text-white">${category.name}</h3>
                            </a>
                        `;
                        categoriesContainer.innerHTML += categoryCard;
                    });
                    categoriesError.classList.add('hidden');
                } catch (error) {
                    console.error("Error loading categories:", error);
                    categoriesContainer.innerHTML = ''; // Clear placeholders
                    categoriesError.classList.remove('hidden');
                }
            }

            // --- Load Tools ---
            async function loadTools(searchTerm = '') {
                toolsContainer.innerHTML = `
                    <div class="bg-white dark:bg-gray-700 rounded-lg shadow-md p-6 animate-pulse">
                        <div class="w-16 h-16 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-4"></div>
                        <div class="h-6 bg-gray-300 dark:bg-gray-600 rounded w-3/4 mx-auto mb-2"></div>
                        <div class="h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mx-auto mb-4"></div>
                        <div class="h-16 bg-gray-300 dark:bg-gray-600 rounded mb-4"></div>
                        <div class="h-10 bg-blue-400 rounded w-full"></div>
                    </div>
                    <div class="bg-white dark:bg-gray-700 rounded-lg shadow-md p-6 animate-pulse">
                        <div class="w-16 h-16 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-4"></div>
                        <div class="h-6 bg-gray-300 dark:bg-gray-600 rounded w-3/4 mx-auto mb-2"></div>
                        <div class="h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2 mx-auto mb-4"></div>
                        <div class="h-16 bg-gray-300 dark:bg-gray-600 rounded mb-4"></div>
                        <div class="h-10 bg-blue-400 rounded w-full"></div>
                    </div>
                `; // Show loading placeholders
                toolsError.classList.add('hidden');
                noToolsFound.classList.add('hidden');

                try {
                    let tools = [];
                    let queries = [{ field: 'isApproved', operator: '==', value: true }]; // Only show approved tools

                    if (searchTerm) {
                        // For basic client-side search, we fetch all relevant data and filter.
                        // For robust search, consider full-text search solutions like Algolia or dedicated backend search.
                        const allApprovedTools = await getDocumentsByQuery('tools', [{ field: 'isApproved', operator: '==', value: true }]);
                        tools = allApprovedTools.filter(tool => 
                            tool.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                            (tool.description && tool.description.toLowerCase().includes(searchTerm.toLowerCase())) ||
                            (tool.category && tool.category.toLowerCase().includes(searchTerm.toLowerCase()))
                        );
                    } else {
                        tools = await getDocumentsByQuery('tools', queries, { field: 'views', direction: 'desc' }, 6); // Fetch top 6 tools by views
                    }
                    
                    toolsContainer.innerHTML = ''; // Clear placeholders

                    if (tools.length === 0) {
                        noToolsFound.classList.remove('hidden');
                        return;
                    }

                    noToolsFound.classList.add('hidden');
                    tools.forEach(tool => {
                        const toolCard = `
                            <div class="bg-white dark:bg-gray-700 rounded-lg shadow-md p-6 flex flex-col items-center text-center">
                                <img src="${tool.logoUrl || '/images/placeholder-logo.png'}" alt="${tool.name} Logo" class="w-16 h-16 object-contain rounded-full mb-4 border border-gray-200 dark:border-gray-600 p-1">
                                <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">${tool.name}</h3>
                                <p class="text-blue-600 dark:text-blue-400 text-sm mb-3">${tool.category || 'Uncategorized'}</p>
                                <p class="text-gray-700 dark:text-gray-300 text-sm mb-4 flex-grow">${tool.description.substring(0, 100)}${tool.description.length > 100 ? '...' : ''}</p>
                                <a href="/tool.html?slug=${tool.slug}" class="mt-auto inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                                    Learn More <i class="fas fa-arrow-right ml-1"></i>
                                </a>
                            </div>
                        `;
                        toolsContainer.innerHTML += toolCard;
                    });
                    toolsError.classList.add('hidden');
                } catch (error) {
                    console.error("Error loading tools:", error);
                    toolsContainer.innerHTML = ''; // Clear placeholders
                    toolsError.classList.remove('hidden');
                }
            }

            // --- Search Functionality ---
            let searchTimeout;
            searchInput.addEventListener('keyup', () => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    const term = searchInput.value.trim();
                    loadTools(term);
                }, 500); // Debounce search input
            });

            // Initial loads
            await loadCategories();
            await loadTools();
        });
    </script>
</body>
                                                                                                    </html>
